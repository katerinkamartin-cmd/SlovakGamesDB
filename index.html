<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEPS Dashboard - Martin Katerinka</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        :root {
            --seps-blue: #0056b3;
            --seps-green: #28a745;
            --bg-dark: #121212;
            --card-bg: #1e1e1e;
            --text-color: #e0e0e0;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .navbar {
            background-color: #000;
            border-bottom: 3px solid var(--seps-blue);
        }

        .card {
            background-color: var(--card-bg);
            border: 1px solid #333;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        .card-header {
            background-color: rgba(255,255,255,0.05);
            border-bottom: 1px solid #333;
            font-weight: bold;
            color: var(--seps-blue);
        }

        .metric-box {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            background: linear-gradient(145deg, #2a2a2a, #222);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #fff;
        }

        .metric-label {
            color: #888;
            text-transform: uppercase;
            font-size: 0.8rem;
        }

        #map {
            height: 400px;
            width: 100%;
            border-radius: 0 0 10px 10px;
        }

        .status-ok { color: var(--seps-green); }
        .status-warn { color: #ffc107; }

        footer {
            margin-top: 30px;
            padding: 20px;
            text-align: center;
            font-size: 0.9rem;
            color: #666;
            border-top: 1px solid #333;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <strong>SEPS</strong> ANALYTICS DASHBOARD
            </a>
            <div class="d-flex text-light align-items-center">
                <span class="me-3">System Frequency: <strong class="status-ok">50.02 Hz</strong></span>
                <span class="badge bg-primary">Autor: Martin Katerinka</span>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="metric-box">
                    <div class="metric-label">Aktuálne zaťaženie (SK)</div>
                    <div class="metric-value" id="load-val">3 845 <span style="font-size:1rem">MW</span></div>
                    <small class="text-success">↑ 1.2% oproti včerajšku</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-box">
                    <div class="metric-label">Výroba</div>
                    <div class="metric-value" id="prod-val">3 920 <span style="font-size:1rem">MW</span></div>
                    <small class="text-info">Export: 75 MW</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-box">
                    <div class="metric-label">Jadrová výroba</div>
                    <div class="metric-value">2 050 <span style="font-size:1rem">MW</span></div>
                    <small class="text-muted">Stabilný výkon</small>
                </div>
            </div>
            <div class="col-md-3">
                <div class="metric-box">
                    <div class="metric-label">Predikcia odchýlky</div>
                    <div class="metric-value status-ok">NEG</div>
                    <small>Systém je vyvážený</small>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-8">
                <div class="card h-100">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>Topology Map: Prenosová sústava (400kV / 220kV)</span>
                        <span class="badge bg-success">Live Status</span>
                    </div>
                    <div class="card-body p-0">
                        <div id="map"></div>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card h-100">
                    <div class="card-header">Energetický Mix (Výroba)</div>
                    <div class="card-body">
                        <canvas id="mixChart"></canvas>
                        <hr>
                        <div class="mt-3">
                            <h6>Kľúčové poznatky (Insights):</h6>
                            <ul class="list-group list-group-flush bg-transparent">
                                <li class="list-group-item bg-transparent text-white">Dominuje <strong>Jadrová energia</strong> (stabilná báza).</li>
                                <li class="list-group-item bg-transparent text-white">Vodné elektrárne vykrývajú špičky.</li>
                                <li class="list-group-item bg-transparent text-white">Obnoviteľné zdroje (FVE) momentálne na <strong>12%</strong>.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">Denný diagram zaťaženia (Predikcia vs. Realita)</div>
                    <div class="card-body">
                        <canvas id="loadChart" height="100"></canvas>
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">Cezhraničné toky (Cross-border Flows)</div>
                    <div class="table-responsive">
                        <table class="table table-dark table-striped mb-0">
                            <thead>
                                <tr>
                                    <th>Profil</th>
                                    <th>Smer</th>
                                    <th>Tok (MW)</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>SK - CZ</td>
                                    <td>Import →</td>
                                    <td class="text-info fw-bold">450</td>
                                    <td><span class="badge bg-success">OK</span></td>
                                </tr>
                                <tr>
                                    <td>SK - HU</td>
                                    <td>Export ←</td>
                                    <td class="text-warning fw-bold">820</td>
                                    <td><span class="badge bg-success">OK</span></td>
                                </tr>
                                <tr>
                                    <td>SK - PL</td>
                                    <td>Import →</td>
                                    <td class="text-info fw-bold">120</td>
                                    <td><span class="badge bg-success">OK</span></td>
                                </tr>
                                <tr>
                                    <td>SK - UA</td>
                                    <td>Export ←</td>
                                    <td class="text-warning fw-bold">180</td>
                                    <td><span class="badge bg-warning text-dark">Limit</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="card-footer text-muted text-center" style="font-size: 0.8rem;">
                        Dáta agregované z platformy ENTSO-E
                    </div>
                </div>
            </div>
        </div>

    </div>

    <footer>
        <p>&copy; 2026 Slovenská elektrizačná prenosová sústava | <strong>Dashboard Concept by Martin Katerinka</strong></p>
        <p>Vytvorené pre účely výberového konania na pozíciu Dátový Analytik.</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // --- 1. Konfigurácia Mapy (Leaflet) ---
        // Stred Slovenska
        var map = L.map('map').setView([48.7, 19.6], 7);

        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
            subdomains: 'abcd',
            maxZoom: 19
        }).addTo(map);

        // Simulácia uzlov (Rozvodne)
        const substations = [
            { name: "Stupava (400kV)", coords: [48.27, 17.03] },
            { name: "Križovany (400kV)", coords: [48.31, 17.65] },
            { name: "Moldava (400kV)", coords: [48.61, 21.00] },
            { name: "Lemešany (400kV)", coords: [48.85, 21.26] },
            { name: "Varín (400kV)", coords: [49.19, 18.87] }
        ];

        // Pridanie markerov
        substations.forEach(sub => {
            L.circleMarker(sub.coords, {
                color: '#0056b3',
                fillColor: '#00f',
                fillOpacity: 0.8,
                radius: 8
            }).addTo(map).bindPopup(`<b>${sub.name}</b><br>Status: Active<br>Load: High`);
        });

        // Simulácia vedení (Lines) - len vizuálne prepojenia
        var lines = [
            [substations[0].coords, substations[1].coords], // Stupava - Krizovany
            [substations[1].coords, substations[4].coords], // Krizovany - Varin
            [substations[4].coords, substations[3].coords], // Varin - Lemesany
            [substations[3].coords, substations[2].coords]  // Lemesany - Moldava
        ];

        L.polyline(lines, {color: 'red', weight: 3, opacity: 0.7, dashArray: '10, 10'}).addTo(map);


        // --- 2. Graf Energetického Mixu (Doughnut Chart) ---
        const ctxMix = document.getElementById('mixChart').getContext('2d');
        new Chart(ctxMix, {
            type: 'doughnut',
            data: {
                labels: ['Jadro (Nuclear)', 'Voda (Hydro)', 'Fosilné (Fossil)', 'OZE (Renewables)', 'Ostatné'],
                datasets: [{
                    data: [55, 18, 10, 12, 5], // Reprezentatívne % pre SR
                    backgroundColor: ['#28a745', '#007bff', '#6c757d', '#ffc107', '#17a2b8'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'right', labels: { color: '#fff' } }
                }
            }
        });

        // --- 3. Graf Zaťaženia (Line Chart) ---
        const ctxLoad = document.getElementById('loadChart').getContext('2d');
        
        // Generovanie dát pre 24 hodín
        const hours = Array.from({length: 24}, (_, i) => `${i}:00`);
        const loadPrediction = [2800, 2700, 2650, 2600, 2700, 3000, 3400, 3800, 3900, 3950, 3900, 3850, 3800, 3750, 3800, 3900, 4000, 4100, 4050, 3900, 3700, 3400, 3100, 2900];
        const loadReal = [...loadPrediction.slice(0, 16).map(v => v + (Math.random() * 100 - 50)), null, null, null, null, null, null, null, null]; // Realita len do 16:00

        new Chart(ctxLoad, {
            type: 'line',
            data: {
                labels: hours,
                datasets: [
                    {
                        label: 'Predikcia (Forecast)',
                        data: loadPrediction,
                        borderColor: '#6c757d',
                        borderDash: [5, 5],
                        tension: 0.4,
                        pointRadius: 0
                    },
                    {
                        label: 'Realita (Actual)',
                        data: loadReal,
                        borderColor: '#0056b3',
                        backgroundColor: 'rgba(0, 86, 179, 0.2)',
                        fill: true,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: { grid: { color: '#333' }, ticks: { color: '#aaa' } },
                    x: { grid: { display: false }, ticks: { color: '#aaa' } }
                },
                plugins: {
                    legend: { labels: { color: '#fff' } }
                }
            }
        });

    </script>
</body>
</html>